╔═══════════════════════════════════════════════════════════════════════════════╗
║                         DYAD WEB PLATFORM ARCHITECTURE                         ║
╚═══════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────┐
│                          USER ACCESS LAYER                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌────────────────────┐              ┌────────────────────┐                │
│  │   ELECTRON APP     │              │    WEB BROWSER     │                │
│  │                    │              │                    │                │
│  │  Windows/Mac/Linux │              │  Chrome/Edge/etc.  │                │
│  │  Desktop Install   │              │  PWA Install       │                │
│  └────────────────────┘              └────────────────────┘                │
│           │                                    │                             │
└───────────┼────────────────────────────────────┼─────────────────────────────┘
            │                                    │
            │                                    │
┌───────────▼────────────────────────────────────▼─────────────────────────────┐
│                       REACT FRONTEND (Vite)                                   │
├───────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  React 19 │ TanStack Router │ TailwindCSS │ Radix UI │ PostHog              │
│                                                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                      PLATFORM DETECTION                              │    │
│  │  src/lib/platform.ts → isElectron() / isWeb()                       │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│           │                                │                    │             │
│           │                                │                    │             │
│  ┌────────▼─────────┐     ┌───────────────▼────────┐  ┌────────▼──────────┐│
│  │  IPC ADAPTER     │     │  FILESYSTEM ADAPTER     │  │  DATABASE ADAPTER ││
│  │  184 lines       │     │  331 lines              │  │  184 lines        ││
│  │                  │     │                         │  │                   ││
│  │  • invoke()      │     │  • readFile()           │  │  • query()        ││
│  │  • send()        │     │  • writeFile()          │  │  • execute()      ││
│  │  • on()          │     │  • openFilePicker()     │  │  • get()          ││
│  └────────┬─────────┘     └────────────┬────────────┘  └────────┬──────────┘│
│           │                            │                         │            │
└───────────┼────────────────────────────┼─────────────────────────┼────────────┘
            │                            │                         │
            │                            │                         │
     ┌──────▼────────┐          ┌───────▼────────┐        ┌───────▼────────┐
     │               │          │                │        │                │
   ELECTRON       WEB PLATFORM                 
     │               │          │                │        │                │
     │               │          │                │        │                │
┌────▼─────┐  ┌─────▼──────┐  ┌▼──────┐ ┌──────▼──┐   ┌─▼──────┐ ┌──────▼───┐
│Native IPC│  │ REST API   │  │Node FS│ │FS API   │   │ SQLite │ │IndexedDB │
│          │  │ WebSocket  │  │       │ │Virtual  │   │        │ │PostgreSQL│
└──────────┘  └─────┬──────┘  └───────┘ └─────────┘   └────────┘ └──────────┘
                    │
                    │
┌───────────────────▼───────────────────────────────────────────────────────────┐
│                        EXPRESS BACKEND SERVER                                  │
│                        src/server/index.ts (230 lines)                        │
├───────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌─────────────┐  ┌──────────────┐  ┌─────────────┐  ┌──────────────┐     │
│  │ REST API    │  │  WebSocket   │  │  Sessions   │  │   Security   │     │
│  │             │  │              │  │             │  │              │     │
│  │ POST /api/* │  │  WS /ws/*    │  │ express-    │  │ • Helmet     │     │
│  │             │  │              │  │ session     │  │ • CORS       │     │
│  │ GET /health │  │  Real-time   │  │             │  │ • CSP        │     │
│  └─────────────┘  └──────────────┘  └─────────────┘  └──────────────┘     │
│                                                                               │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │                     MIDDLEWARE STACK                                  │   │
│  │  Compression │ Body Parser │ Session │ CORS │ Helmet │ Error Handler│   │
│  └──────────────────────────────────────────────────────────────────────┘   │
│                                                                               │
└───────────────────────────────────────────────────────────────────────────────┘
                                │
                                │
┌───────────────────────────────▼───────────────────────────────────────────────┐
│                          PWA FEATURES (Web Only)                              │
├───────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌──────────────────┐  ┌──────────────────┐  ┌─────────────────────────┐   │
│  │ SERVICE WORKER   │  │  PWA MANIFEST    │  │  INSTALL PROMPT         │   │
│  │                  │  │                  │  │                         │   │
│  │ • Offline Cache  │  │ • App Metadata   │  │ • Install Button        │   │
│  │ • Auto-update    │  │ • Icons          │  │ • Dismissal Logic       │   │
│  │ • Network First  │  │ • Theme Colors   │  │ • User Notification     │   │
│  │ • Cache Fallback │  │ • Shortcuts      │  │ • localStorage Tracking │   │
│  └──────────────────┘  └──────────────────┘  └─────────────────────────┘   │
│                                                                               │
└───────────────────────────────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────────────────────────────┐
│                         DEPLOYMENT OPTIONS                                    │
├───────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
│  │   DOCKER     │  │   VERCEL     │  │  TRADITIONAL │  │   DESKTOP    │   │
│  │              │  │              │  │     VPS      │  │              │   │
│  │ • Dockerfile │  │ • vercel.json│  │ • PM2        │  │ • electron-  │   │
│  │ • Compose    │  │ • Serverless │  │ • Nginx      │  │   forge      │   │
│  │ • PostgreSQL │  │ • CDN        │  │ • SSL        │  │ • Native     │   │
│  │ • Nginx      │  │ • Auto Scale │  │ • Custom     │  │ • Installers │   │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │
│                                                                               │
└───────────────────────────────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────────────────────────────┐
│                          KEY STATISTICS                                       │
├───────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  Total Implementation:     1,981 lines (code + docs)                         │
│  Core TypeScript Code:     1,134 lines                                       │
│  Documentation:              847 lines                                       │
│  Files Created:               24 files                                       │
│  Git Commits:                  4 commits                                     │
│  Development Time:          ~2 hours                                         │
│                                                                               │
│  Platform Support:                                                            │
│    • Electron Desktop:     Windows, macOS, Linux                             │
│    • Web Browsers:         Chrome 90+, Edge 90+, Firefox 88+, Safari 14+    │
│    • PWA Installation:     Desktop and Mobile                                │
│                                                                               │
│  Key Features:                                                                │
│    ✅ Universal Codebase     ✅ Progressive Web App     ✅ Offline Support   │
│    ✅ Auto Updates           ✅ Platform Adapters       ✅ Docker Ready      │
│    ✅ Security Headers       ✅ REST + WebSocket        ✅ Well Documented   │
│                                                                               │
└───────────────────────────────────────────────────────────────────────────────┘
